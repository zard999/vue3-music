/* empty css             *//* empty css                 */import{C as p}from"./Comment.e9c79b0a.js";import{e as s,_ as F,d as W,a as r,t as d,b as o,x as l,F as v,v as C,f as u,u as t,aF as Y,U as T,j as J,l as K,av as V,aG as Q,aH as X,aI as ee,aJ as te,aK as oe,aL as ne,aM as ie,aN as se,aO as ae,s as le,o as ce,P as re,aw as de,ae as me,y as w,c as ue,O as he,aP as ke,af as _e,ag as ve}from"./index.69f64e29.js";import{I as f,_ as h}from"./IconPark.f27efd9e.js";import{L as Ce}from"./Like.da450144.js";import{P as fe}from"./PlayOne.7f566db7.js";var ge=f("message-one",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M4 6H44V36H29L24 41L19 36H4V6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M23 21H25.0025",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M33.001 21H34.9999",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M13.001 21H14.9999",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Le=f("share",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M28 6H42V20",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M42 29.4737V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9C6 7.34315 7.34315 6 9 6L18 6",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M25.7998 22.1999L41.0998 6.8999",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),we=f("star",!1,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M23.9986 5L17.8856 17.4776L4 19.4911L14.0589 29.3251L11.6544 43L23.9986 36.4192L36.3454 43L33.9586 29.3251L44 19.4911L30.1913 17.4776L23.9986 5Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),ye=f("thumbs-up",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M27.6002 18.5998V11.3998C27.6002 8.41743 25.1826 5.99977 22.2002 5.99977L15.0002 22.1998V41.9998H35.9162C37.7113 42.0201 39.2471 40.7147 39.5162 38.9398L42.0002 22.7398C42.1587 21.6955 41.8506 20.6343 41.1576 19.8373C40.4645 19.0403 39.4564 18.5878 38.4002 18.5998H27.6002Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M15 22.0001H10.194C8.08532 21.9628 6.2827 23.7095 6 25.7994V38.3994C6.2827 40.4894 8.08532 42.0367 10.194 41.9994H15V22.0001Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),H=f("video-two",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M20.5 28V21.9378L25.75 24.9689L31 28L25.75 31.0311L20.5 34.0622V28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M6 15H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M33 6L27 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M21 6L15 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const Me={class:"comment-list"},Ie={class:"avatar"},De=["src","alt","title"],xe={class:"info"},Be={class:"flex justify-between"},je={class:"tool flex flex-row items-center justify-around"},ze={class:"line mr-7"},be={class:"content"},Ve=W({__name:"CommentList",props:{title:null,commentList:null,currentCommentId:null},setup(e){return(n,a)=>(r(),d("div",Me,[o("h3",null,l(e.title),1),o("ul",null,[(r(!0),d(v,null,C(e.commentList,i=>(r(),d("li",{class:"item",key:i.commentId},[o("div",Ie,[o("img",{src:i.user.avatarUrl+"?param=150y150",alt:i.user.nickname,title:i.user.nickname},null,8,De)]),o("div",xe,[o("h2",Be,[o("span",null,[u(l(i.user.nickname)+" ",1),o("small",null," \xB7 "+l(t(Y)(i.time)),1)]),o("div",je,[s(h,{icon:t(ye),size:16,onClick:c=>n.$emit("commentLike",i.commentId,i.liked),class:T(i.liked?"active":"")},null,8,["icon","onClick","class"]),o("span",ze,"("+l(i.likedCount)+")",1),s(h,{icon:t(ge),size:16,onClick:c=>n.$emit("commentHandle",i.commentId)},null,8,["icon","onClick"])])]),o("div",be,[u(l(i.content)+" ",1),(r(!0),d(v,null,C(i.beReplied,c=>(r(),d("div",{class:"beReqlied",key:c.beRepliedCommentId},[o("small",null,"@"+l(c.user.nickname)+"\uFF1A",1),u(l(c.content),1)]))),128))])])]))),128))])]))}});var He=F(Ve,[["__scopeId","data-v-63a42682"]]);const S=J({id:"mvDetail",state:()=>({detail:{name:"",videoGroup:[{name:"",id:0}],publishTime:"",playCount:0,subCount:0,desc:""},router:K(),creator:{},relatedList:[{vid:0,id:0,cover:"",name:"",isLive:!1,artists:[{id:0,name:""}]}],hotComments:[],comments:[],currentCommentId:"",videoUrl:"",currentPage:1,limit:20,offset:0,videoId:0,commentTotal:0,clearContent:!1,videoDetailInfo:{isLike:!1,likeCount:0,shareCount:0,commentCount:0}}),actions:{handleVideoId(e){this.videoId=e},handleSizeChange(e){this.limit=e,this.offset=this.limit*this.currentPage,this.getMvComments(this.videoId)},handleCurrentChange(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.getMvComments(this.videoId)},commentHandle(e){this.currentCommentId=e},commentSubmit(e){if(e){let n=new Date().getTime(),a={type:1,id:this.videoId,content:e,timestamp:n,t:-1,commentId:""};this.currentCommentId==""?a.t=1:(a.t=2,a.commentId=this.currentCommentId),Q(a).then(i=>{V({message:"\u63D0\u4EA4\u6210\u529F",type:"success"}),this.cancelComment(),this.clearContent=!0,this.getMvComments(this.videoId)}).catch(i=>{X({title:i.data.dialog.title,message:i.data.dialog.subtitle,type:"error"})})}else{V({message:"\u4EC0\u4E48\u90FD\u6CA1\u5199\uFF0C\u4F60\u70B9\u6BDB",type:"warning"});return}},cancelComment(){this.currentCommentId=""},async commentLike(e,n){let a=new Date().getTime(),i={id:this.videoId,cid:e,type:1,timestamp:a,t:-1};n?i.t=0:i.t=1;try{(await ee(i)).code===200&&this.getMvComments(this.videoId)}catch(c){console.log(c)}},async likeResource(){let e=1,n=1;this.videoDetailInfo.isLike?n=2:n=1;let a=this.videoId;try{(await te(e,n,a)).code===200&&this.getMvDetailInfo(this.videoId)}catch(i){console.log(i)}},async getMvUrl(e){try{let n=await oe(e);n.code===200&&(this.videoUrl=n.data.url)}catch(n){console.log(n)}},async getMvDetail(e){try{let n=await ne(e);n.code===200&&(n.data.videoGroup.map(a=>{a.name.indexOf("#")!=-1&&(a.name=a.name.replace(/#/g,""))}),this.detail=n.data)}catch(n){console.log(n)}},async getMvDetailInfo(e){try{let n=await ie(e,new Date().getTime());if(n.code===200){let a={isLike:n.liked,likeCount:n.likedCount,shareCount:n.shareCount,commentCount:n.commentCount};this.videoDetailInfo=a}}catch(n){console.log(n)}},async getMvRelated(e){try{let n=await se(e);n.code===200&&(this.relatedList=n.mvs)}catch(n){console.log(n)}},async getMvComments(e){let n=new Date().getTime(),a={id:e,limit:this.limit,offset:this.offset,timestamp:n};try{let i=await ae(a);i.code===200&&(this.commentTotal=i.total,i.hotComments?this.hotComments=i.hotComments:this.hotComments=[],this.comments=i.comments)}catch(i){console.log(i)}},toDetail(e){this._initialize(e),this.router.push({name:"mvDetail",query:{id:e}})},_initialize(e){this.getMvUrl(e),this.getMvDetail(e),this.getMvRelated(e),this.getMvDetailInfo(e),this.getMvComments(e)}},getters:{}});const $=e=>(_e("data-v-2aa73ca5"),e=e(),ve(),e),Se={class:"mv-detail container"},Fe={class:"left shadow"},We={class:"video-container"},Te=["src"],$e={class:"video-foot"},Ee={class:"title flex flex-row items-center"},Ae={class:"tag"},Re={class:"flex-row"},Pe={key:0},Ne={class:"follow"},Ue={class:"box"},Oe={class:"box"},Ze={class:"comments"},qe={class:"title flex flex-row items-center"},Ge={class:"noticom"},pe={class:"page-wrap"},Ye={class:"right"},Je={class:"profile module shadow"},Ke=$(()=>o("div",{class:"card-header flex-row"},[o("span",null,"\u89C6\u9891\u7B80\u4ECB")],-1)),Qe={class:"content"},Xe={key:0},et={key:1},tt={class:"related module shadow"},ot=$(()=>o("div",{class:"card-header flex-row"},[o("span",null,"\u76F8\u5173\u63A8\u8350")],-1)),nt={class:"avatar"},it=["src","alt","title"],st={class:"action"},at=["onClick"],lt={class:"info"},ct={class:"flex flex-row items-center ellipsis"},rt={class:"author"},dt=W({__name:"MVDetail",setup(e){const n=he(),{videoId:a,videoUrl:i,detail:c,videoDetailInfo:g,currentCommentId:y,clearContent:mt,hotComments:M,comments:E,currentPage:A,limit:R,commentTotal:P,relatedList:N}=le(S()),{_initialize:I,likeResource:D,commentHandle:x,cancelComment:B,commentSubmit:j,commentLike:z,handleSizeChange:U,handleCurrentChange:O,toDetail:Z,handleVideoId:q}=S();return ce(()=>{let k=Number(n.query.id);k&&(q(k),I(k))}),re(()=>n.query.name,k=>{let _=Number(n.query.id)||a.value;_&&I(_)}),(k,_)=>{const b=He,G=ke;return r(),d("div",Se,[o("div",Fe,[o("div",We,[o("video",{src:t(i),controls:"true",autoplay:"",controlslist:"nodownload"},null,8,Te)]),o("div",$e,[o("h2",Ee,[s(h,{icon:t(H),size:14,class:"mr mr-2"},null,8,["icon"]),u(" "+l(t(c).name),1)]),o("div",Ae,[(r(!0),d(v,null,C(t(c).videoGroup,m=>(r(),d("a",{key:m.id},"#"+l(m.name),1))),128))]),o("p",Re,[o("span",null,"\u53D1\u5E03\uFF1A"+l(t(de)(t(c).publishTime,"YYYY-MM-DD")),1),t(c).playCount?(r(),d("span",Pe,"\u64AD\u653E\u6B21\u6570\uFF1A"+l(t(me)(t(c).playCount,1)),1)):w("",!0)]),o("div",Ne,[o("div",{class:T(["box",t(g).isLike?"active":""]),onClick:_[0]||(_[0]=(...m)=>t(D)&&t(D)(...m))},[s(h,{icon:t(Ce),size:14,class:"mr mr-2"},null,8,["icon"]),u(l(t(g).likeCount),1)],2),o("div",Ue,[s(h,{icon:t(we),size:14,class:"mr mr-2"},null,8,["icon"]),u(l(t(c).subCount),1)]),o("div",Oe,[s(h,{icon:t(Le),size:14,class:"mr mr-2"},null,8,["icon"]),u(l(t(g).shareCount),1)])])]),o("div",Ze,[o("div",qe,[s(h,{icon:t(p),size:14,class:"mr mr-2"},null,8,["icon"]),u(" Comments | "),o("span",Ge,[o("a",null,l(t(g).commentCount)+" \u6761\u8BC4\u8BBA",1)])]),t(M).length>0?(r(),ue(b,{key:0,title:"\u7CBE\u5F69\u8BC4\u8BBA",commentList:t(M),currentCommentId:t(y),onCommentHandle:t(x),onCancelComment:t(B),onCommentSubmit:t(j),onCommentLike:t(z)},null,8,["commentList","currentCommentId","onCommentHandle","onCancelComment","onCommentSubmit","onCommentLike"])):w("",!0),s(b,{title:"\u6700\u65B0\u8BC4\u8BBA",commentList:t(E),currentCommentId:t(y),onCommentHandle:t(x),onCancelComment:t(B),onCommentSubmit:t(j),onCommentLike:t(z)},null,8,["commentList","currentCommentId","onCommentHandle","onCancelComment","onCommentSubmit","onCommentLike"]),o("div",pe,[s(G,{onSizeChange:t(U),onCurrentChange:t(O),"current-page":t(A),"page-size":t(R),background:"","hide-on-single-page":"",layout:"total, prev, pager, next",total:t(P),class:"justify-center"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])]),o("div",Ye,[o("div",Je,[Ke,o("div",Qe,[t(c).desc?(r(),d("p",Xe,l(t(c).desc),1)):(r(),d("p",et,"\u89C6\u9891\u6682\u65E0\u7B80\u4ECB"))])]),o("div",tt,[ot,o("ul",null,[(r(!0),d(v,null,C(t(N),m=>(r(),d("li",{key:m.vid},[o("div",nt,[o("img",{src:m.cover+"?param=320y180",alt:m.name,title:m.name},null,8,it),o("div",st,[m.isLive?w("",!0):(r(),d("button",{key:0,class:"play flex justify-center items-center",title:"\u64AD\u653E",onClick:L=>t(Z)(m.id)},[s(h,{icon:t(fe),size:20},null,8,["icon"])],8,at))])]),o("div",lt,[o("h2",ct,[s(h,{icon:t(H),size:14,class:"mr mr-2"},null,8,["icon"]),u(l(m.name),1)]),o("div",rt,[u(" By."),(r(!0),d(v,null,C(m.artists,L=>(r(),d("span",{key:L.id},[o("small",null,l(L.name),1)]))),128))])])]))),128))])])])])}}});var gt=F(dt,[["__scopeId","data-v-2aa73ca5"]]);export{gt as default};
