import{A as C}from"./ArtistList.79affc79.js";import{j as D,l as x,aW as k,ay as B,aX as F,aC as M,m as S,_ as E,d as T,s as I,P as N,o as L,a as r,t as c,b as s,u as o,x as n,aw as U,f as _,y as q,e as z,F as p,v as f,aF as V,O as Y,af as H,ag as R}from"./index.69f64e29.js";/* empty css             *//* empty css                        */import"./IconPark.f27efd9e.js";import"./Play.debfb153.js";import"./Like.da450144.js";import"./PauseOne.46a04f47.js";const g=D({id:"albumDetail",state:()=>({detail:{},creator:{},songs:Array(),subscribers:[],comments:Array(),hotAlbums:Array(),router:x()}),actions:{async getAlbumData(a){try{let t=await k(a);t.code===200&&(this.detail=t.album,this.creator=t.album.artist,this.songs=this._normalizeSongs(t.songs),this.getArtistAlbum())}catch(t){console.log(t)}},async getArtistAlbum(){let a={id:this.creator.id,limit:5,offset:0};try{let t=await B(a);this.hotAlbums=t.hotAlbums}catch(t){console.log(t)}},async getAlbumComment(a){let t={id:a,limit:28,offset:0};try{let l=await F(t);l.code===200&&(l.hotComments.length>0?this.comments=l.hotComments:this.comments=l.comments)}catch(l){console.log(l)}},_normalizeSongs(a){let t=[];return a.map(l=>{l.id&&t.push(M(l))}),t},openDesc(a,t){S.alert(t,a,{closeOnClickModal:!0,customClass:"descBox",showConfirmButton:!1,dangerouslyUseHTMLString:!0})},toDetail(a){this.router.push({name:"albumDetail",query:{id:a}})},_initialize(a){this.getAlbumData(a),this.getAlbumComment(a)}}});const d=a=>(H("data-v-33275164"),a=a(),R(),a),j={class:"album-detail container"},O={class:"left shadow"},P={class:"top"},$={class:"avatar"},W=["src"],X={class:"info"},G={class:"title flex-between"},J=d(()=>s("div",null,null,-1)),K={class:"user flex-row"},Q={class:"avatar"},Z=["src"],ss={class:"nickname"},ts={class:"createTime"},es={class:"tag flex-row"},as={class:"desc"},os=["innerHTML"],ls=d(()=>s("i",{class:"iconfont niceiconfontyoujiantou-copy-copy-copy-copy"},null,-1)),is={class:"content"},ns={class:"right"},rs={class:"related module shadow"},cs=d(()=>s("div",{class:"card-header flex-row"},[s("span",null,"\u70ED\u95E8\u4E13\u8F91")],-1)),us=["onClick"],ds={class:"avatar"},ms=["src","alt","title"],_s={class:"info"},hs=["title"],ps={class:"comment module shadow"},fs=d(()=>s("div",{class:"card-header flex-row"},[s("span",null,"\u7CBE\u5F69\u8BC4\u8BBA")],-1)),gs={class:"avatar"},vs=["src","alt","title"],ys={class:"info"},bs=T({__name:"albumDetail",setup(a){const t=Y(),{_initialize:l,toDetail:v,openDesc:y}=g(),{comments:b,hotAlbums:A,songs:w,detail:i,creator:h}=I(g());return N(()=>t.query.id,(u,m)=>{let e=Number(t.query.id);e&&l(e)}),L(()=>{const u=Number(t.query.id);u&&l(u)}),(u,m)=>(r(),c("div",j,[s("div",O,[s("div",P,[s("div",$,[s("img",{src:o(i).picUrl+"?param=200y200",alt:""},null,8,W)]),s("div",X,[s("div",G,[s("span",null,n(o(i).name),1),J]),s("div",K,[s("div",Q,[s("img",{src:o(h).picUrl+"?param=100y100",alt:""},null,8,Z)]),s("p",ss,n(o(h).name),1),s("p",ts,n(o(U)(o(i).publishTime,"YYYY-MM-DD"))+"\u521B\u5EFA ",1)]),s("div",es,"\u53D1\u884C\u516C\u53F8\uFF1A"+n(o(i).company),1),s("div",as,[s("p",{class:"ellipsis-two",innerHTML:o(i).description},null,8,os),o(i).description&&o(i).description.length>50?(r(),c("span",{key:0,onClick:m[0]||(m[0]=e=>o(y)(o(i).name,o(i).description)),class:"flex-row"},[_("\u5168\u90E8"),ls])):q("",!0)])])]),s("div",is,[z(C,{subscribed:!1,songs:o(w),isPerson:!0},null,8,["songs"])])]),s("div",ns,[s("div",rs,[cs,s("ul",null,[(r(!0),c(p,null,f(o(A),e=>(r(),c("li",{key:e.id,onClick:As=>o(v)(e.id)},[s("div",ds,[s("img",{src:e.picUrl+"?param=150y150",alt:e.name,title:e.name},null,8,ms)]),s("div",_s,[s("h2",{class:"ellipsis",title:e.name},n(e.name),9,hs),s("span",null,[_("By. "),s("small",null,n(e.artist.name),1)])])],8,us))),128))])]),s("div",ps,[fs,s("ul",null,[(r(!0),c(p,null,f(o(b),e=>(r(),c("li",{class:"item",key:e.time},[s("div",gs,[s("img",{src:e.user.avatarUrl+"?param=150y150",alt:e.user.nickname,title:e.user.nickname},null,8,vs)]),s("div",ys,[s("h2",null,[_(n(e.user.nickname),1),s("small",null," \xB7 "+n(o(V)(e.time)),1)]),s("p",null,n(e.content),1)])]))),128))])])])]))}});var Ss=E(bs,[["__scopeId","data-v-33275164"]]);export{Ss as default};
